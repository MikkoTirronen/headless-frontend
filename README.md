## About this Project

This Project is an attempt at creating a headlessly managed content system. It uses the backend of Wordpress hosted on AWS LightSail to manage a seperate frontend hosted on Vercel. The frontend is a Responsive website that uses Bootstrap 5 instead of wordpress styles generated by getStaticProps/getStaticPaths through nextjs on the server. All api requests are handled with GraphQL through the GraphQL plugin in Wordpress. The endpoint for all data requests is thus ["/graphql"]. The backend is hosted on AWS Lightsail through a year long trial account as long as I dont exceed a certain limit of requests. The domain for this deployment is [http://wordpress.mikkotirronen.com]

- Note that since this is a project for my Full Stack Development education I have done my best to spend as little as possible to host this project on free trials of subscription based services.

Frontend:
Hosted on Vercel

Backend:
Hosted on AWS Lightsail

There are three main integrations at this point:

    1. Github --> Vercel
       Every push to the main branch will trigger a new deployment on vercel.

    2. Wordpress --> Zapier --> Discord
       Every new post will create a new message in the general chat of my Discord server with links to the new post. This is acheived through the wordpress Plugin Zapier.

    3. Wordpress --> Zapier --> vercel
       Every new post and updated post will trigger a new build on vercel through a post request sent by Zapier Webhooks.

    4. Discord --> Zapier--> Wordpress (not actived at the moment)
        I did also manage to create an integration from a discord message to a draft in wordpress that could be then published however since the content on my frontend uses the dangerouslysetHTML attribute I wondered if this was actually a good idea. Dilemas aside, its possible.

\*Side Note: Zapier is a Subscription based plugin with a 14 day trial that will expire around 10/10/22 at which point the last three integrations will not work.

## Getting Started: Backend

#Backend Requirements:
-install MAMP
-download a copy of wordpress from http://wordpress.org

#Local development Backend Setup:

1.  In MAMP configure your preferences to point the document root to your wordpress download
2.  In Port settings of your preferences I recommend using the MAMP defaults
    \*Take note of the mysql address you will need this later in the wordpress install
3.  Click on the Open Webstart Page
4.  Under tools go to php admin
5.  Click on Database in the Navigation Menu and create Database
    *Take note of this name as you will need it in the wordpress install
    *Take note of User Page here if you are uncertain what user account will have access to connect to the database

6.  Go To [http://localhost:8888] if you clicked on use MAMP Defaults in the Port section of the install otherwise use what localhost you decided on.

7.  Proceed with the wordpress instalation. Use the database name, username, and password from step 5 as well as the mySQL address in step 2 for Database Host.

8.  Proceed with the wordpress installation and create an administrator account that you will use to login to your wordpress manager.

9.  Navigate to the Plug Ins section of the wordpress manager and click on Add New. Search for the Following addons:
    a. All-In-One WP Migration by ServMax

    b. Wp Maximum Upload File Size by CodePopular

    \*Remember to Download AND Activate these plugins.

## Optional Steps

This is the point of divergence if you are recreating your own project with your own Lightsail deployed backend. From this point on we will be proceeding with steps specific to this project. Using the Migration tool deployed on http://wordpress.mikkotirronen.com to migrate my deployment to the local environment for development. Do this by:

1. Logging into http://wordpress.mikkotirronen.com
2. Navigating to the All-In-One Migration tool.
3. Click on the export option and select file as output.
4. Wait till the process is complete and Download the file created.
5. Go to your local deployment of Wordpress we created above.
6. Repeat Step 2.
7. Click on Import and Choose the File you downloaded.

- Note that now all your previous content, settings, and plugins are over written by the deployed LIVE version of my project.

\*\* If at any Point the Import file or export file says that the file is too large to import and asks you to increase the limit. Navigate to Media in the Local Wordpress. Under Media there should be an Option to Increase Upload Limit (make sure plugin b is active). Choose the relevent option. then Set Maximum Execution Time to 300 or higher depending on your BANDWIDTH (Download/Upload speeds).

## Backend Deployment

Deployment is acheived by Reversing the order of the Optional steps above. Using the Migration tool on the local development to create an export of the local environment then Importing it on AWS Lightsail on the admin section of [https://wordpress.mikkotirronen.com/]

## Getting Started: Frontend

#About the frontend:
I have wrapped the frontend app with an Apollo Client that handles my graphQL requests. The endpoint can be found in a folder /lib in this project. You will notice that the endpoint ends with /graphql which is the default setting of the wordpress plugin: GraphQl that handles the backend logic.

#Frontend Local development setup

    1. Clone this Repository onto your local computer
    2. Open the folder in Visual Studio Code
    3. Rename the .env.local.sample to .env.local
    4. Change the NEXT_PUBLIC_API_KEY to your local deployment of wordpress "localhost:8888" or to the live deployment "wordpress.mikkotirronen.com". Do not include http:// or https:// .

Run the local development environment by:

                    ```bash
                    npm run dev
                    # or
                    yarn dev
                    ```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

## Frontend Deployment

This github repo is linked with Vercel which requires a github account to create. After linking a github account and choosing a Repository to monitor you can setup a deployment trigger with each push to a specified branch. In this project that trigger is set to a push to main. Note that This repository also has an environmental variable NEXT_PUBLIC_API_URL set to specify the end point for data requests. That environmental variable must be recreated in Vercel for successful deployment.

## Deploy on Vercel
